<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="thienlh@thienlu.com"><link rel=icon href=../../images/favicon.png type=image/png><title>Blog 2 :: Internship Report</title>
<link href=../../css/nucleus.css?1765357123 rel=stylesheet><link href=../../css/fontawesome-all.min.css?1765357123 rel=stylesheet><link href=../../css/hybrid.css?1765357123 rel=stylesheet><link href=../../css/featherlight.min.css?1765357123 rel=stylesheet><link href=../../css/perfect-scrollbar.min.css?1765357123 rel=stylesheet><link href=../../css/auto-complete.css?1765357123 rel=stylesheet><link href=../../css/atom-one-dark-reasonable.css?1765357123 rel=stylesheet><link href=../../css/theme.css?1765357123 rel=stylesheet><link href=../../css/hugo-theme.css?1765357123 rel=stylesheet><link href=../../css/theme-workshop.css?1765357123 rel=stylesheet><script src=../../js/jquery-3.3.1.min.js?1765357123></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../3-blogstranslated/3.2-blog2/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../js/lunr.min.js?1765357123></script><script type=text/javascript src=../../js/auto-complete.js?1765357123></script><script type=text/javascript>var baseurl="https://tuananh3232.github.io/aws_intership/"</script><script type=text/javascript src=../../js/search.js?1765357123></script></div><div class=highlightable><ul class=topics><li data-nav-id=/1-worklog/ title=Worklog class=dd-item><a href=../../1-worklog/><b>1. </b>Worklog
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/1-worklog/1.1-week1/ title="Week 1 Worklog" class=dd-item><a href=../../1-worklog/1.1-week1/><b>1.1. </b>Week 1 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.2-week2/ title="Week 2 Worklog" class=dd-item><a href=../../1-worklog/1.2-week2/><b>1.2. </b>Week 2 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.3-week3/ title="Week 3 Worklog" class=dd-item><a href=../../1-worklog/1.3-week3/><b>1.3. </b>Week 3 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.4-week4/ title="Week 4 Worklog" class=dd-item><a href=../../1-worklog/1.4-week4/><b>1.4. </b>Week 4 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.5-week5/ title="Week 5 Worklog" class=dd-item><a href=../../1-worklog/1.5-week5/><b>1.5. </b>Week 5 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.6-week6/ title="Week 6 Worklog" class=dd-item><a href=../../1-worklog/1.6-week6/><b>1.6. </b>Week 6 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.7-week7/ title="Week 7 Worklog" class=dd-item><a href=../../1-worklog/1.7-week7/><b>1.7. </b>Week 7 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.8-week8/ title="Week 8 Worklog" class=dd-item><a href=../../1-worklog/1.8-week8/><b>1.8. </b>Week 8 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.9-week9/ title="Week 9 Worklog" class=dd-item><a href=../../1-worklog/1.9-week9/><b>1.9. </b>Week 9 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.10-week10/ title="Week 10 Worklog" class=dd-item><a href=../../1-worklog/1.10-week10/><b>1.10. </b>Week 10 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.11-week11/ title="Week 11 Worklog" class=dd-item><a href=../../1-worklog/1.11-week11/><b>1.11. </b>Week 11 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.12-week12/ title="Week 12 Worklog" class=dd-item><a href=../../1-worklog/1.12-week12/><b>1.12. </b>Week 12 Worklog
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/2-proposal/ title=Proposal class=dd-item><a href=../../2-proposal/><b>2. </b>Proposal
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/ title="Translated Blogs" class="dd-item
parent"><a href=../../3-blogstranslated/><b>3. </b>Translated Blogs
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/3-blogstranslated/3.1-blog1/ title="Blog 1" class=dd-item><a href=../../3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.2-blog2/ title="Blog 2" class="dd-item
active"><a href=../../3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.3-blog3/ title="Blog 3" class=dd-item><a href=../../3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/4-eventparticipated/ title="Events Participated" class=dd-item><a href=../../4-eventparticipated/><b>4. </b>Events Participated
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/4-eventparticipated/4.1-event1/ title="Event 1" class=dd-item><a href=../../4-eventparticipated/4.1-event1/><b>4.1. </b>Event 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.2-event2/ title="Event 2" class=dd-item><a href=../../4-eventparticipated/4.2-event2/><b>4.2. </b>Event 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.3-event3/_.index/ title="Event 3" class=dd-item><a href=../../4-eventparticipated/4.3-event3/_.index/><b>4.3. </b>Event 3 <i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.4-event4/ title="Event 4" class=dd-item><a href=../../4-eventparticipated/4.4-event4/><b>4.4. </b>Event 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.5-event5/ title="Event 5" class=dd-item><a href=../../4-eventparticipated/4.5-event5/><b>4.5. </b>Event 5
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/ title=Workshop class=dd-item><a href=../../5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.1-workshop-overview/ title=Introduction class=dd-item><a href=../../5-workshop/5.1-workshop-overview/><b>5.1. </b>Introduction
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.2-prerequiste/ title=Prerequiste class=dd-item><a href=../../5-workshop/5.2-prerequiste/><b>5.2. </b>Prerequiste
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-lambda/ title=Lambda class=dd-item><a href=../../5-workshop/5.3-lambda/><b>5.3 </b>Lambda
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-apigateway/ title="API Gateway" class=dd-item><a href=../../5-workshop/5.4-apigateway/><b>5.4 </b>API Gateway
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.6-s3/ title="Set up S3" class=dd-item><a href=../../5-workshop/5.6-s3/><b>5.6. </b>Set up S3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.7-cloudfront/ title="Set up CloudFront" class=dd-item><a href=../../5-workshop/5.7-cloudfront/><b>5.7. </b>Set up CloudFront
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.8-cognito/ title="Setup AWS Cognito Authentication" class=dd-item><a href=../../5-workshop/5.8-cognito/><b>5.8. </b>Setup AWS Cognito Authentication
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.8-cognito/5.8.1-create-user-pool/ title="Create Cognito User Pool" class=dd-item><a href=../../5-workshop/5.8-cognito/5.8.1-create-user-pool/><b>5.8.1. </b>Create Cognito User Pool
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.8-cognito/5.8.2-password-policies/ title="Configure Password Policies" class=dd-item><a href=../../5-workshop/5.8-cognito/5.8.2-password-policies/><b>5.8.2. </b>Configure Password Policies
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.8-cognito/5.8.3-email-verification/ title="Setup Email Verification" class=dd-item><a href=../../5-workshop/5.8-cognito/5.8.3-email-verification/><b>5.8.3. </b>Setup Email Verification
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.8-cognito/5.8.4-app-client/ title="Configure App Client" class=dd-item><a href=../../5-workshop/5.8-cognito/5.8.4-app-client/><b>5.8.4. </b>Configure App Client
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.9-keymanagementservice/ title="Set up KMS" class=dd-item><a href=../../5-workshop/5.9-keymanagementservice/><b>5.9. </b>Set up KMS
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.17-secretmanager/ title="Configure AWS Secrets Manager" class=dd-item><a href=../../5-workshop/5.17-secretmanager/><b>5.17. </b>Configure AWS Secrets Manager
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.18-waf/ title="Set up Web ACL" class=dd-item><a href=../../5-workshop/5.18-waf/><b>5.18. </b>Set up Web ACL
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/6-self-evaluation/ title=Self-Assessment class=dd-item><a href=../../6-self-evaluation/><b>6. </b>Self-Assessment
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/7-feedback/ title="Sharing and Feedback" class=dd-item><a href=../../7-feedback/><b>7. </b>Sharing and Feedback
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://tuananh3232.github.io/aws_intership/3-blogstranslated/3.2-blog2/ selected>English</option><option id=vi value=https://tuananh3232.github.io/aws_intership/vi/3-blogstranslated/3.2-blog2/>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../>Internship Report</a> > <a href=../../3-blogstranslated/>Translated Blogs</a> > Blog 2</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#synchronous-container-applications>Synchronous container applications</a></li><li><a href=#challenges-with-synchronous-architectures>Challenges with synchronous architectures</a></li><li><a href=#benefits-of-using-lambda-container-image-support>Benefits of using Lambda Container Image Support</a></li><li><a href=#scaling-with-asynchronous-events>Scaling with asynchronous events</a></li><li><a href=#integrations-with-multiple-destinations>Integrations with multiple destinations</a></li><li><a href=#design-considerations>Design considerations</a></li><li><a href=#conclusion>Conclusion</a></li><li><a href=#by-author>By author</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 2</h1><h1 id=scaling-data-analytics-containers-with-event-based-lambda-functions>Scaling Data Analytics Containers with Event-based Lambda Functions</h1><p>by: Brian Maguire, Guy Bachar, and Mike Boyar</p><p>on 30 Aug 2021</p><p>Danh mục: <strong><a href=https://aws.amazon.com/vi/blogs/architecture/category/application-services/amazon-api-gateway-application-services/>Amazon API Gateway</a></strong>, <strong><a href=https://aws.amazon.com/vi/blogs/architecture/category/compute/amazon-ec2/>Amazon EC2</a></strong>, <strong><a href=https://aws.amazon.com/vi/blogs/architecture/category/compute/amazon-elastic-container-service/>Amazon Elastic Container Service</a></strong>, <strong><a href=https://aws.amazon.com/vi/blogs/architecture/category/analytics/>Analytics</a></strong>, <strong><a href=https://aws.amazon.com/vi/blogs/architecture/category/architecture/>Architecture</a></strong>, <strong><a href=https://aws.amazon.com/vi/blogs/architecture/category/compute/aws-elastic-beanstalk/>AWS Elastic Beanstalk</a></strong>, <strong><a href=https://aws.amazon.com/vi/blogs/architecture/category/learning-levels/intermediate-200/>Intermediate (200)</a></strong>, <strong><a href=https://aws.amazon.com/vi/blogs/architecture/category/industries/manufacturing/>Manufacturing</a></strong></p><p>The marketing industry collects and uses data from various stages of the customer journey. When they analyze this data, they establish metrics and develop actionable insights that are then used to invest in customers and generate revenue.</p><p>If you’re a data scientist or developer in the marketing industry, you likely often use containers for services like collecting and preparing data, developing machine learning models, and performing statistical analysis. Because the types and amount of marketing data collected are quickly increasing, you’ll need a solution to manage the scale, costs, and number of required data analytics integrations.</p><p>In this post, we provide a solution that can perform and scale with dynamic traffic and is cost optimized for on-demand consumption. It uses synchronous container-based data science applications that are deployed with asynchronous container-based architectures on <strong><a href=https://aws.amazon.com/vi/lambda/>AWS Lambda</a></strong>. This serverless architecture automates data analytics workflows utilizing event-based prompts.</p><h2 id=synchronous-container-applications>Synchronous container applications</h2><p>Data science applications are often deployed to dedicated container instances, and their requests are routed by an Amazon API Gateway or load balancer. Typically, an Amazon API Gateway routes HTTP requests as synchronous invocations to instance-based container hosts.</p><p>The target of the requests is a container-based application running a machine learning service (SciLearn). The service container is configured with the required dependency packages such as <strong><a href=http://c/Users/mccbonni/AppData/Local/Temp/scikit-learn.org>scikit-learn</a></strong>, <strong><a href=http://c/Users/mccbonni/AppData/Local/Temp/pandas.pydata.org>pandas</a></strong>, <strong><a href=https://numpy.org/>NumPy</a></strong> and <strong><a href=https://scipy.org/>SciPy</a></strong>.</p><p>Containers are commonly deployed on different targets such as on-premises, <strong><a href=https://aws.amazon.com/vi/ecs/>Amazon Elastic Container Service (Amazon ECS)</a></strong>, <strong><a href=https://aws.amazon.com/vi/ec2/>Amazon Elastic Compute Cloud (Amazon EC2)</a></strong> and <strong><a href=https://aws.amazon.com/vi/elasticbeanstalk/>AWS Elastic Beanstalk</a></strong> These services run synchronously and scale through <strong><a href=https://aws.amazon.com/vi/autoscaling/>Amazon Auto Scaling groups</a></strong> and a time-based consumption pricing model.</p><p><img alt="Synchronous container applications diagram" src=../../images/blog2/Lambdasync.png>
Figure 1. Synchronous container applications diagram</p><h2 id=challenges-with-synchronous-architectures>Challenges with synchronous architectures</h2><p>When using a synchronous architecture, you will likely encounter some challenges related to scale, performance, and cost:</p><ul><li><p><strong>Operation blocking</strong>: The sender does not proceed until Lambda returns, and failure processing, such as retries, must be handled by the sender.</p></li><li><p><strong>No native AWS service integrations</strong>: You cannot use several native integrations with other AWS services such as <strong><a href=https://aws.amazon.com/vi/s3/>Amazon Simple Storage Service (Amazon S3)</a></strong>, <strong><a href=https://aws.amazon.com/vi/eventbridge/>Amazon EventBridge</a></strong> and <strong><a href=https://aws.amazon.com/vi/sqs/>Amazon Simple Queue Service (Amazon SQS)</a></strong>.</p></li><li><p><strong>Increased expense</strong>: A 24/7 environment can result in increased expenses if resources are idle, not sized appropriately, and cannot automatically scale.</p></li></ul><p>The <strong><a href=https://aws.amazon.com/vi/blogs/aws/new-for-aws-lambda-container-image-support/>“New for AWS Lambda – Container Image Support”</a></strong> blog post offers a serverless, event-based architecture to address these challenges. This approach is explained in detail in the following section.</p><h2 id=benefits-of-using-lambda-container-image-support>Benefits of using Lambda Container Image Support</h2><p>In our solution, we refactored the synchronous SciLearn application that was deployed on instance-based hosts as an asynchronous event-based application running on Lambda. This solution includes the following benefits:</p><ul><li><p><strong>Easier dependency management with Dockerfile</strong>: Dockerfile allows you to install native operating system packages and language-compatible dependencies or use enterprise-ready container images.</p></li><li><p><strong>Similar tooling</strong>: The asynchronous and synchronous solutions use <strong><a href=https://aws.amazon.com/vi/ecr/>Amazon Elastic Container Registry (Amazon ECR)</a></strong> to store application artifacts. Therefore, they have the same build and deployment pipeline tools to inspect Dockerfiles. This means your team will likely spend less time and effort learning how to use a new tool.</p></li><li><p><strong>Performance and cost</strong>: Lambda provides sub-second autoscaling that’s aligned with demand. This results in higher availability, lower operational overhead, and cost efficiency.</p></li><li><p><strong>Integrations</strong>: AWS provides more than 200 service integrations to deploy functions as container images on Lambda, without having to develop it yourself so it can be deployed faster.</p></li><li><p><strong>Larger application artifact up to 10 GB</strong>: This includes larger application dependency support, giving you more room to host your files and packages in oppose to hard limit of 250 MB of unzipped files for deployment packages.</p></li></ul><h2 id=scaling-with-asynchronous-events>Scaling with asynchronous events</h2><p>AWS offers two ways to asynchronously scale processing independently and automatically: <strong><a href=https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/concepts-worker.html>Elastic Beanstalk worker environments</a></strong> and <strong><a href=https://docs.aws.amazon.com/lambda/latest/dg/invocation-async.html>asynchronous invocation</a></strong> with Lambda. Both options offer the following:</p><ul><li><p>They put events in an SQS queue.</p></li><li><p>They can be designed to take items from the queue only when they have the capacity available to process a task. This prevents them from becoming overwhelmed.</p></li><li><p>They offload tasks from one component of your application by sending them to a queue and process them asynchronously.</p></li></ul><p>These asynchronous invocations add default, tunable failure processing and retry mechanisms through “on failure” and “on success” event destinations, as described in the following section.</p><h2 id=integrations-with-multiple-destinations>Integrations with multiple destinations</h2><p>“On failure” and “on success” events can be logged in an SQS queue, <strong><a href=https://aws.amazon.com/vi/sns/>Amazon Simple Notification Service (Amazon SNS)</a></strong> topic, EventBridge event bus, or another Lambda function. All four are integrated with most AWS services.</p><p>“On failure” events are sent to an SQS dead-letter queue because they cannot be delivered to their destination queues. They will be reprocessed them as needed, and any problems with message processing will be isolated.</p><p>Figure 2 shows an asynchronous Amazon API Gateway that has placed an HTTP request as a message in an SQS queue, thus decoupling the components.</p><p>The messages within the SQS queue then prompt a Lambda function. This runs the machine learning service SciLearn container in Lambda for data analysis workflows, which are integrated with another SQS dead letter queue for failures processing.</p><p><img alt="Example asynchronous-based container applications diagram" src=../../images/blog2/Async.png>
Hình 2. Example asynchronous-based container applications diagram</p><p>When you deploy Lambda functions as container images, they benefit from the same operational simplicity, automatic scaling, high availability, and native integrations. This makes it an appealing architecture for our data analytics use cases.</p><h2 id=design-considerations>Design considerations</h2><p>The following can be considered when implementing Docker Container Images with Lambda:</p><ul><li><p>Lambda supports container images that have manifest files that follow these formats:</p><p><span style=font-size:1rem>+ Docker image manifest V2, schema 2 (Docker version 1.10 and newer)</span></p><p><span style=font-size:1rem>+ Open Container Initiative (OCI) specifications (v1.0.0 and up)</span></p></li><li><p>Storage in Lambda:</p><p><span style=font-size:1rem>+ Memory (128 MB to 10,240 MB)</span></p><p><span style=font-size:1rem>+ /tmp space (512 MB)</span></p><p><span style=font-size:1rem>+ Container images up to10 GB</span></p><p><span style=font-size:1rem>+ Amazon S3 or <a href=https://aws.amazon.com/vi/efs/>Amazon Elastic File System (Amazon EFS)</a> làm lưu trữ ngoài.</span> as external storage.</p></li><li><p>On create/update, Lambda will cache the image to speed up the cold start of functions during execution. Cold starts occur on an initial request to Lambda, which can lead to longer startup times. The first request will maintain an instance of the function for only a short time period. If Lambda has not been called during that period, the next invocation will create a new instance.</p></li><li><p>Fine grain role policies are highly recommended for security purposes.</p></li><li><p>Container images can use the <strong><a href=https://docs.aws.amazon.com/lambda/latest/dg/runtimes-extensions-api.html>Lambda Extensions</a></strong> to integrate monitoring, security and other tools with the Lambda execution environment.</p></li></ul><h2 id=conclusion>Conclusion</h2><p>We were able to architect this synchronous service based on a previously deployed on instance-based hosts and design it to become asynchronous on Amazon Lambda.</p><p>By using the new support for container-based images in Lambda and converting our workload into an asynchronous event-based architecture, we were able to overcome these challenges:</p><ul><li><p><strong>Performance and security</strong>:With batch requests, you can scale asynchronous workloads and handle failure records using SQS Dead Letter Queues and Lambda destinations. Using Lambda to integrate with other services (such as EventBridge and SQS) and using Lambda roles simplifies maintaining a granular permission structure. When Lambda uses an Amazon SQS queue as an event source, it can scale up to 60 more instances per minute, with a maximum of 1,000 concurrent invocations.</p></li><li><p><strong>Cost optimization</strong>: Compute resources are a critical component of any application architecture. Overprovisioning computing resources and operating idle resources can lead to higher costs. Because Lambda is serverless, it only incurs costs on when you invoke a function and the resources allocated for each request.</p></li></ul><hr><h2 id=by-author>By author</h2><div style="display:flex;align-items:center;gap:20px;border:1px solid #e0e0e0;border-radius:8px;padding:16px;background-color:#fff;max-width:900px"><img src=../../images/blog2/brian_maguire.png alt="Brian Maguire" style=width:120px;height:auto;border-radius:6px;object-fit:cover><div style=flex:1><p style=margin:0><strong style=font-size:1.1rem;color:#0d1b2a>Elizabeth Fuentes</strong><br>Brian Maguire là Principal Solutions Architect tại Amazon Web Services, nơi anh tập trung giúp khách hàng xây dựng ý tưởng của họ trên đám mây. Anh là một technologist, writer, teacher và student yêu thích việc học hỏi. Brian là đồng tác giả của cuốn sách Scalable Data Streaming with Amazon Kinesis.</p></div></div><div style="display:flex;align-items:center;gap:20px;border:1px solid #e0e0e0;border-radius:8px;padding:16px;background-color:#fff;max-width:900px"><img src=../../images/blog2/guy_bachar.png alt="Guy Bachar" style=width:120px;height:auto;border-radius:6px;object-fit:cover><div style=flex:1><p style=margin:0><strong style=font-size:1.1rem;color:#0d1b2a>Elizabeth Fuentes</strong><br>Guy là Senior Solutions Architect tại AWS. Anh chuyên hỗ trợ người dùng trong Capital Markets và FinTech với các hành trình chuyển đổi lên cloud. Chuyên môn của anh bao gồm quản lý Danh tính (Identity), bảo mật (security) và truyền thông hợp nhất (unified communication).</p></div></div><div style="display:flex;align-items:center;gap:20px;border:1px solid #e0e0e0;border-radius:8px;padding:16px;background-color:#fff;max-width:900px"><img src=../../images/blog2/mike_boyar.png alt="Mike Boyar" style=width:120px;height:auto;border-radius:6px;object-fit:cover><div style=flex:1><p style=margin:0><strong style=font-size:1.1rem;color:#0d1b2a>Elizabeth Fuentes</strong><br>Mike Boyar là Solutions Architect tại AWS. Trong thời gian rảnh, anh thích nướng bánh mì kiểu French country.</p></div></div><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../3-blogstranslated/3.1-blog1/ title="Blog 1"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../3-blogstranslated/3.3-blog3/ title="Blog 3" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../js/clipboard.min.js?1765357123></script><script src=../../js/perfect-scrollbar.min.js?1765357123></script><script src=../../js/perfect-scrollbar.jquery.min.js?1765357123></script><script src=../../js/jquery.sticky.js?1765357123></script><script src=../../js/featherlight.min.js?1765357123></script><script src=../../js/highlight.pack.js?1765357123></script><script>hljs.initHighlightingOnLoad()</script><script src=../../js/modernizr.custom-3.6.0.js?1765357123></script><script src=../../js/learn.js?1765357123></script><script src=../../js/hugo-learn.js?1765357123></script><link href=../../mermaid/mermaid.css?1765357123 rel=stylesheet><script src=../../mermaid/mermaid.js?1765357123></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>